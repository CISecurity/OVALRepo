<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>lib_search.SearchIndex</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >OVALRepo APIs</th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="lib_search-module.html">Module&nbsp;lib_search</a> ::
        Class&nbsp;SearchIndex
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="lib_search.SearchIndex-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class SearchIndex</h1><p class="nomargin-top"><span class="codelink"><a href="lib_search-pysrc.html#SearchIndex">source&nbsp;code</a></span></p>
<pre class="literalblock">
Abstract base class including generic methods to create, maintain and query an index. 

This class should not be instantiated! 
Child class must implement the following or this class will break (see examples below):
    self.index_name: &lt;str&gt; property
    self.item_label: &lt;str&gt; property
    self.schema_dictionary: &lt;dictionary&gt; property
    self.document_iterator: method that returns source data files as indexable documents

</pre>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__init__"></a><span class="summary-sig-name">__init__</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">message_method</span>=<span class="summary-sig-default">False</span>)</span><br />
      constructor, set defaults for instances</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="lib_search.SearchIndex-class.html#query" class="summary-sig-name">query</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">query_dict</span>=<span class="summary-sig-default">{}</span>,
        <span class="summary-sig-arg">query_options</span>=<span class="summary-sig-default">{}</span>)</span><br />
      Perform a query against an index.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.query">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="grouped_query"></a><span class="summary-sig-name">grouped_query</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">query_dict</span>=<span class="summary-sig-default">{}</span>,
        <span class="summary-sig-arg">group_by</span>=<span class="summary-sig-default">[]</span>)</span><br />
      Perform a query and group results</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.grouped_query">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="paged_query"></a><span class="summary-sig-name">paged_query</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">query_dict</span>=<span class="summary-sig-default">{}</span>,
        <span class="summary-sig-arg">page</span>=<span class="summary-sig-default">1</span>,
        <span class="summary-sig-arg">page_length</span>=<span class="summary-sig-default">50</span>)</span><br />
      Perform a query and return a page of results</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.paged_query">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="lib_search.SearchIndex-class.html#update" class="summary-sig-name">update</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">force_rebuild</span>=<span class="summary-sig-default">False</span>)</span><br />
      Adds/updates all items in repo to index.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.update">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="index_based_on_current_commit"></a><span class="summary-sig-name">index_based_on_current_commit</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Is the index based on the current commit?</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.index_based_on_current_commit">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="get_fieldnames"></a><span class="summary-sig-name">get_fieldnames</span>(<span class="summary-sig-arg">self</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.get_fieldnames">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="get_indexed_commit_hash"></a><span class="summary-sig-name">get_indexed_commit_hash</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Returns the git commit hash that the index was built on.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.get_indexed_commit_hash">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="set_indexed_commit_hash"></a><span class="summary-sig-name">set_indexed_commit_hash</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Persists the git commit hash that the index was built on.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.set_indexed_commit_hash">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="get_indexed_uncommitted_files"></a><span class="summary-sig-name">get_indexed_uncommitted_files</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Returns a list of uncommitted files in the index.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.get_indexed_uncommitted_files">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="set_indexed_uncommitted_files"></a><span class="summary-sig-name">set_indexed_uncommitted_files</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">files</span>=<span class="summary-sig-default">[]</span>)</span><br />
      Persist a list of uncommitted files in the index.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.set_indexed_uncommitted_files">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="get_index"></a><span class="summary-sig-name">get_index</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">force_rebuild</span>=<span class="summary-sig-default">False</span>)</span><br />
      Returns a reference to the search index, creating if necessary.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.get_index">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="get_searcher"></a><span class="summary-sig-name">get_searcher</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Returns a reference to the index searcher, creating if necssary.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.get_searcher">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="close_searcher"></a><span class="summary-sig-name">close_searcher</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Closes the index searcher.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.close_searcher">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="whoosh_escape"></a><span class="summary-sig-name">whoosh_escape</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">s</span>)</span><br />
      Escape a string for whoosh.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.whoosh_escape">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="whoosh_escape_document"></a><span class="summary-sig-name">whoosh_escape_document</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">document</span>)</span><br />
      Escape all document fields, adding _stored values where necessary.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.whoosh_escape_document">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="status_spinner"></a><span class="summary-sig-name">status_spinner</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">count</span>,
        <span class="summary-sig-arg">task</span>,
        <span class="summary-sig-arg">label</span>,
        <span class="summary-sig-arg">done</span>=<span class="summary-sig-default">False</span>)</span><br />
      show a simple spinner status update on the CLI</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.status_spinner">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="message"></a><span class="summary-sig-name">message</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">type</span>,
        <span class="summary-sig-arg">message</span>)</span><br />
      print a message</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.message">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="query"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">query</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">query_dict</span>=<span class="sig-default">{}</span>,
        <span class="sig-arg">query_options</span>=<span class="sig-default">{}</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.query">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Perform a query against an index. 

query_dict: {
    '&lt;field name&gt;' : ['&lt;value&gt;', '&lt;value&gt;', ...],
    '&lt;field name&gt;' : '&lt;value&gt;',
    ....
}
For example:
{
    'platforms': ['Microsoft Windows NT', 'Microsoft Windows 2000'], 
    'products': 'mozilla', 
    'contributors': 'Jonathan Baker'
}

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="update"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">update</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">force_rebuild</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="lib_search-pysrc.html#SearchIndex.update">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Adds/updates all items in repo to index. Note: querying will call this
  automatically.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >OVALRepo APIs</th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Thu Jul 23 15:39:32 2015
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
